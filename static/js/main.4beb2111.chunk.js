(this.webpackJsonprps_client=this.webpackJsonprps_client||[]).push([[0],{110:function(e,t){},119:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(63),c=n.n(l),o=(n(72),n(18)),i=n(4),s=n(3),u=n(32),m=n.n(u),f=n(64),d=n.n(f)()("http://localhost:4000"),y=n(65),b=n(42),g=n(43),p=["#f4f4f4","#4fc1e8","#a0d568","#ffce54","#ac92eb","#ed5564"];var E=function(e){var t=Object(a.useState)(e.type),n=Object(s.a)(t,2),l=n[0];return n[1],r.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement("button",{onClick:function(){e.disabled||e.handleClick(e.x_index,e.y_index)},style:{background:p[l],height:70,width:70}}," ",function(t){switch(t){case 0:return null;case 1:return r.a.createElement(b.b,{color:e.selected_tile?"blue":"black",size:"3em"});case 2:return r.a.createElement(g.b,{color:e.selected_tile?"blue":"black",size:"3em"});case 3:return r.a.createElement(y.a,{size:"3em"});case 4:return r.a.createElement(b.a,{size:"3em"});case 5:return r.a.createElement(g.a,{size:"3em"});default:return null}}(l),"  "),e.disabled?r.a.createElement("h5",{style:{marginTop:10}},e.number):null)};var j=function(e){var t=Object(a.useState)([[],[],[],[],[],[],[],[]]),n=Object(s.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(null),i=Object(s.a)(o,2),u=i[0],m=i[1],f=Object(a.useState)(),d=Object(s.a)(f,2),y=d[0];function b(t,n){return t>=l.length||n>=l[0].length||t<0||n<0?(console.log("something went wrong"),!1):l[t][n].player_id!==e.my_turn}function g(t,n){e.player_id===e.my_turn&&(u?(console.log(t,n),e.makeMove(t,n,u.from_x,u.from_y),m(null)):!function(t,n){return t>l.length||n>l[0].length||t<0||n<0?(console.log("something went wrong"),!1):l[t][n].player_id!==e.my_turn?(console.log("not your player select difrent tile",l[t][n].player_id),!1):!!(b(t+1,n)||b(t-1,n)||b(t,n+1)||b(t,n-1))}(t,n)?m(null):m({from_x:t,from_y:n}))}function p(e,t){return!!u&&(u.from_x===e&&u.from_y===t)}return d[1],Object(a.useEffect)((function(){c(e.board)}),[e.board]),r.a.createElement("div",{key:y,style:{display:"flex",flexDirection:"column"}},l.map((function(e,t){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.map((function(e,n){return r.a.createElement(E,{selected_tile:p(t,n),handleClick:g,key:n,x_index:t,y_index:n,type:e.tile})})))})))},x=n(8),O=n(19),h=n.n(O),v=n(25),_=n.n(v),w=n(21),C=n.n(w),S=n(20),k=n.n(S);n(41);var I=function(e){var t=e.location,n=Object(a.useState)(""),l=Object(s.a)(n,2),c=(l[0],l[1]),o=Object(a.useState)(""),u=Object(s.a)(o,2),f=u[0],y=u[1],b=Object(a.useState)(!1),g=Object(s.a)(b,2),p=(g[0],g[1]),E=Object(a.useState)([]),O=Object(s.a)(E,2),v=O[0],w=O[1],S=Object(a.useState)(!0),I=Object(s.a)(S,2),B=I[0],D=I[1],R=Object(a.useState)(null),z=Object(s.a)(R,2),G=z[0],M=z[1],T=Object(a.useState)(null),H=Object(s.a)(T,2),J=H[0],q=H[1],L=Object(a.useState)([]),W=Object(s.a)(L,2),A=W[0],U=W[1],$=Object(a.useState)(),F=Object(s.a)($,2),K=F[0],N=F[1];return Object(a.useEffect)((function(){var e=m.a.parse(t.search),n=e.name,a=e.room;return c(n),y(a),d.on("usersInRoom",(function(e){if(console.log("usersinroom"),e.length<2)M("error user left");else{var t=e.map((function(e){return"".concat(e.name)}));U(t)}})),d.on("updateGame",(function(e){console.log("update"),e?(w(e.board),D(e.turn?0:1),N("supper-uniqe-key"+new Date)):M("error game fail")})),d.emit("startedGame",{room:a,name:n},(function(e,t,n){if(console.log(e),console.log(t),t){var a=e.find((function(e){return e.name===n}));if(a){q(a.player_id),w(t.board),D(t.turn?0:1);var r=e.map((function(e){return"".concat(e.name," ")}));U(r)}else M("error user doesnt exists")}else M("error game not found")})),function(){d.emit("disconnect",d),d.off()}}),[]),Object(a.useEffect)((function(){d.emit("usersInRoom",(function(){}))}),[A]),r.a.createElement("div",{style:{minHeight:"100%",border:"solid",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(x.a,{style:{padding:40}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:20}},r.a.createElement("h1",null,"Rps online")),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(x.a,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",padding:10,margin:10}},r.a.createElement(h.a,null),"\xa0",r.a.createElement("h5",null,A&&A.length>0?"player 1: ".concat(A[0].name):"waiting"),A&&A[0]&&A[0].is_ready?r.a.createElement(k.a,null):r.a.createElement(C.a,null)),r.a.createElement(x.a,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",padding:10,margin:10}},r.a.createElement(h.a,null),"\xa0",r.a.createElement("h5",null,A&&A.length>1?"player 2: ".concat(A[1].name):"waiting"),A&&A[1]&&A[1].is_ready?r.a.createElement(k.a,null):r.a.createElement(C.a,null)),r.a.createElement(x.a,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",padding:10,margin:10}},r.a.createElement(_.a,null),"\xa0",r.a.createElement("h5",null,"room: ",f))),r.a.createElement("div",{style:{flex:1,marginBottom:10,display:"flex",justifyContent:"center",alignItems:"stretch"}},r.a.createElement(x.a,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",padding:10,margin:10}},r.a.createElement(_.a,null),"\xa0",r.a.createElement("h5",null,"turn: ",B))),r.a.createElement(j,{key:K,my_turn:B,makeMove:function(e,t,n,a){d.emit("move",{room:f,x_index:e,y_index:t,from_x:n,from_y:a},(function(){}))},setMyTurn:D,player_id:J,setBoardReady:p,board:v,setBoard:w}),G?r.a.createElement(i.a,{to:"/"}):null))},B=n(22);var D=function(e){var t=Object(a.useState)(e.board?e.board:[[],[],[],[],[],[],[],[]]),n=Object(s.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)([0,0,1,0,0,0]),i=Object(s.a)(o,2),u=i[0],m=i[1],f=Object(a.useState)(),d=Object(s.a)(f,2),y=d[0],b=d[1];function g(e,t){var n=function(e,t){if(e>l.length||t>l[0].length||e<6||t<0)return console.log("something went wrong"),-1;var n,a=l[e][t];for(n=(a+1)%6;n<15;n=(n+1)%6)if(u[n]>0){var r=Object(B.a)(u);return r[a]=r[a]+1,r[n]=r[n]-1,m(Object(B.a)(r)),n}return-1}(e,t);if(n>=0){var a=Object(B.a)(l);a[e][t]=n,c(Object(B.a)(a)),b("supper-uniqe-key"+new Date+n)}}return Object(a.useEffect)((function(){c(l.map((function(e,t){return[0,0,0,0,0,0,0,0]})))}),[]),Object(a.useEffect)((function(){!function(){for(var t=1;t<u.length;t++){if(u[t]>0)return void e.setBoardReady(!1)}e.setBoard(Object(B.a)(l)),e.setBoardReady(!0)}()}),[l]),r.a.createElement("div",{key:y,style:{display:"flex",flexDirection:"column"}},l.map((function(e,t){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.map((function(e,n){return r.a.createElement(E,{handleClick:g,key:n,x_index:t,y_index:n,ready_stage:!0,available_tiles:u,setAvailableTiles:m,type:e})})))})),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:40}},u.map((function(e,t){return 0===t?null:r.a.createElement(E,{disabled:!0,number:e,type:t})}))))},R=n(15);var z=function(e){var t=e.location,n=Object(a.useState)(""),l=Object(s.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)(""),f=Object(s.a)(u,2),y=f[0],b=f[1],g=Object(a.useState)(!1),p=Object(s.a)(g,2),E=p[0],j=p[1],O=Object(a.useState)(!1),v=Object(s.a)(O,2),w=v[0],S=v[1],I=Object(a.useState)([]),B=Object(s.a)(I,2),z=B[0],G=B[1],M=Object(a.useState)(),T=Object(s.a)(M,2),H=T[0],J=T[1],q=Object(a.useState)([]),L=Object(s.a)(q,2),W=L[0],A=L[1];function U(){d.emit("playerReady",{room:y,board:W},(function(e){console.log(W),j(e)}))}return Object(a.useEffect)((function(){var e=m.a.parse(t.search),n=e.name,a=e.room;return o(n),b(a),d.on("usersInRoom",(function(e){console.log("usersinroom"),G(e)})),d.on("allUsersReady",(function(){S(!0)})),d.emit("join",{name:n,room:a},(function(e){e.users,e.error})),function(){w||(d.emit("disconnect",d),d.off())}}),[]),r.a.createElement("div",{style:{minHeight:"100%",border:"solid",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(x.a,{style:{padding:40}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:20}},r.a.createElement("h1",null,"Rps online")),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(x.a,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",padding:10,margin:10}},r.a.createElement(h.a,null),"\xa0",r.a.createElement("h5",null,z&&z.length>0?"player 1: ".concat(z[0].name):"waiting"),z&&z[0]&&z[0].is_ready?r.a.createElement(k.a,null):r.a.createElement(C.a,null)),r.a.createElement(x.a,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",padding:10,margin:10}},r.a.createElement(h.a,null),"\xa0",r.a.createElement("h5",null,z&&z.length>1?"player 2: ".concat(z[1].name):"waiting"),z&&z[1]&&z[1].is_ready?r.a.createElement(k.a,null):r.a.createElement(C.a,null)),r.a.createElement(x.a,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",padding:10,margin:10}},r.a.createElement(_.a,null),"\xa0",r.a.createElement("h5",null,"room: ",y))),r.a.createElement("div",{style:{flex:1,marginBottom:10,display:"flex",justifyContent:"center",alignItems:"stretch"}},H?E?r.a.createElement(R.a,{onClick:U},"not ready"):r.a.createElement(R.a,{onClick:U},"ready"):r.a.createElement(R.a,{variant:"secondary",disabled:!0},"ready")),r.a.createElement(D,{setBoardReady:J,setBoard:A}),w?r.a.createElement(i.a,{to:c&&y?"/Game?name=".concat(c,"&room=").concat(y):"/"}):null))};var G=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(""),i=Object(s.a)(c,2),u=i[0],m=i[1];return r.a.createElement("div",{style:{minHeight:"100%",border:"solid",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(x.a,{style:{padding:100}},r.a.createElement("div",{style:{marginBottom:80}},r.a.createElement("h1",null," Rps online")),r.a.createElement("div",{style:{marginBottom:80}},r.a.createElement("div",{style:{marginBottom:20}},r.a.createElement("input",{placeholder:"name",type:"text",onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{style:{marginBottom:20}},r.a.createElement("input",{placeholder:"room",type:"text",onChange:function(e){return m(e.target.value)}}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(o.b,{onClick:function(e){return n&&u?null:e.preventDefault()},to:n&&u?"/Lobby?name=".concat(n,"&room=").concat(u):"/"},r.a.createElement(R.a,{variant:"primary"}," Join Room ")))))};var M=function(){return r.a.createElement(o.a,null,r.a.createElement(i.b,{path:"/",exact:!0,component:G}),r.a.createElement(i.b,{path:"/Lobby",exact:!0,component:z}),r.a.createElement(i.b,{path:"/Game",exact:!0,component:I}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,n){e.exports=n(119)},72:function(e,t,n){}},[[67,1,2]]]);
//# sourceMappingURL=main.4beb2111.chunk.js.map